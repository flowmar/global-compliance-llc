//-
  @Author: flowmar
  @Date: 2022-07-02 23:08:35
  @Last Modified by: flowmar
  @Last Modified time: 2022-07-02 23:09:59


extends layout.pug

block style
  style.
    .form-label{
    color: #fff;
    }

block content
  .container-fluid
    .row.mt-5
      .col-4.display-5.mx-5.page-title Add Mariner
      .col-7
    .row.bg-dark.m-3.p-1.py-3
      .col.shadow-4-strong.bg-light.bg-opacity-25.p-4.d-flex.justify-content-evenly.m-2.mb-0
        form(name="addMarinerForm" data-parsley-validate action="/add" method="post").container
          .row.my-4
            .col-3
              label.form-label(for="mariner-id") Mariner ID:
              input.form-control(id="mariner-id" name="marinerID" type="text" style="background-color: var(--highlight-bg-color);" value=`${next}` readonly required)
              input.form-control(id="marinerIDHidden" name="marinerIDNumber" hidden)
            .col-6
            .col-3
              //- label.form-label(for="application-id") Application ID:
              //- input.form-control(style="background-color: var(--highlight-bg-color);" type="text" id="application-id" name="applicationID" value=`${nextAppID}` disabled required)
              //- input.form-control(hidden id="applicationIDHidden" name="applicationIDNumber")
          .row.my-4
            .col-4
              label.form-label(for="first-name") First Name:
              input.form-control.bg-white(id="first-name" name="firstName" data-parsley-required="true" type="text")
            .col-4
              label.form-label(for="middle-name") Middle Name:
              input.form-control.bg-white(id="middle-name" name="middleName" type="text")
            .col-4
              label.form-label(for="last-name") Last Name:
              input.form-control.bg-white(id="last-name" name="lastName" data-parsley-required="true" type="text")
          .row.my-4
            .col-3
              label.form-label(for="height") Height:
              input.form-control.bg-white(id="height" name="height" type="text")
            .col-3
              label.form-label(for="weight") Weight:
              input.form-control.bg-white(id="weight" name="weight" type="text")
            .col-3
              label.form-label(for="hairColor") Hair Color:
              input.form-control.bg-white(id="hairColor" name="hair" type="text")
            .col-3
              label.form-label(for="eyeColor") Eye Color:
              input.form-control.bg-white(id="eyeColor" name="eyeColor" data-parsley-required="false" type="text")
          .row.my-4
            .col-3
              label.form-label(for="birth-city") City of Birth:
              input.form-control.bg-white(id="birth-city" name="birthCity" type="text")
            .col-3
              label.form-label(for="birth-state") State of Birth:
              input.form-control.bg-white(id="birth-state" name="birthState" type="text")
            .col-3
              label.form-label(for="birth-country") Country of Birth:
              select.form-select.bg-white(id="birth-country" name="birthCountry"
          aria-label="Select birth country")
            .col-3
              label.form-label(for="birth-date") Birth Date:
              input.form-control.bg-white.text-dark(id="birth-date" name="birthDate"
          data-parsley-required="true" type="date")
          .row.my-4
            .col-7
              label.form-label(for="marks") Distinguishing Marks:
              input.form-control.bg-white(id="marks")
            .col-2
            .col-3
              label.form-label(for="physDate") Date of Physical:
              input.form-control.bg-white(id="physDate" data-parsley-required="false" type="date")
          .row.my-3
          .row.my-4
            .col-4
              label.form-label(for="address") Address:
              input.form-control.bg-white(id="address" name="address" type="text")
            .col-4
              label.form-label(for="phone-number") Phone Number:
              input.form-control.bg-white(id="phone-number" name="phone" type="tel" onkeydown="phoneNumberFormatter()")
            .col-4
              label.form-label(for="email") Email:
              input.form-control.bg-white(id="email" name="email" data-parsley-required="false" type="email")
          .row.my-4
            .col-4
              label.form-label(for="employer") Employer:
              select.form-select.bg-white(id="employer" name="employer")
            .col-4
              label.form-label(for="vessel-name") Rig:
              select.form-select.bg-white(id="vessel-name" name="vessel" type="text")
                option(value="0")
            .col-4
              label.form-label(for="mariner-reference-number") Mariner Reference Number:
              input.form-control.bg-white(id="mariner-reference-number" name="marinerRefNum" data-parsley-type="digits" type="text")
          .row.my-4
            .col-4
              label.form-label(for="coContact") Co. Contact:
              input.form-control.bg-white(id="coContact" name="coContact" type="text")
            .col-4
              label.form-label(for="imoNumber") IMO Number:
              input.form-control.bg-white(id="imoNumber" name="imoNumber" data-parsley-type="digits" type="text")
          .row.my-4
            .col-4
              label.form-label(for="passport-number") Passport Number:
              input.form-control.bg-white(id="passport-number" name="passportNumber" data-parsley-type="digits" type="text")
            .col-4
              label.form-label(for="citizenship") Citizenship:
              select.form-select.bg-white(id="citizenship" name="citizenship" aria-label="Select citizenship")
          .row.my-4
            .col-4
              label.form-label(for="processing-agent") Processing Agent:
              select.form-select.bg-white.text-dark(id="processing-agent" name="processingAgent")
            .col-4
            .col-4
              label.form-label(for="status") Status:
              select.form-select.bg-white.text-dark(id="status" name="status")
                option(value="1") Pending
                option(value="2") Submitted
                option(value="3") Completed
          .row.my-4
            .col-12
              label.form-label(for="notes") Mariner Notes:
              textarea.form-control.bg-white.text-dark(id="notes" name="notes" type="text")
          .row.my-4
            .col
            .col.d-flex.justify-content-end
              a.btn.btn-lg.m-2.text-dark(id="cancel-edit-mariner-button" href="/search" style="background-color: var(--red-color); color:#4f4f4f" value="Cancel")
                i.bi.bi-x-square(style="font-size=.9rem")
                span    &nbsp;Cancel
              button.btn.btn-lg.m-2.text-dark(id="save-mariner" type="submit" style="background-color: var(--green-color); color:#4f4f4f" value="Save")
                i.bi.bi-save(style="font-size=.9rem")
                span    &nbsp;Save
          .row.my-4
            .col
              //- button.btn.btn-lg.mx-2#appModalButton(style="background-color: var(--yellow-color);" type="button" value="Application" data-mdb-target="#applicationModal")
              //-   i.bi.bi-file-medical(style="font-size: 1rem;")
              //-   span   &nbsp;Application
              //- a.btn.btn-lg.mx-1(style="background-color: var(--yellow-color);" type="button" id="licenses-button" value="Licenses" data-mdb-target="#licensesModal" href='/licenses' target="_blank")
              //-   i.bi.bi-credit-card(style="font-size: 1rem;")
              //-   span   &nbsp;Licenses

  include includes/applicationModal
  include includes/editActivityModal

  script.
    //- Get the variables from the backend
    let countriesArray = !{JSON.stringify(countries)};
    let employersArray = !{JSON.stringify(employers)};
    let agentsArray = !{JSON.stringify(agents)};
    // Select the Inputs from the form
    let citizenshipInput = document.getElementById('citizenship');
    let birthCountryInput = document.getElementById('birth-country');
    let employerInput = document.getElementById('employer');
    let agentInput = document.getElementById('processing-agent');
    let next = !{next};

    //- Create option elements for Countries
    for(i = 0; i < countriesArray.length; i++) {

      let element = document.createElement('option');
      element.value = i + 1;
      element.text = countriesArray[i];
      citizenshipInput.appendChild(element);

      let element2 = document.createElement('option');
      element2.value = i + 1;
      element2.text = countriesArray[i];
      birthCountryInput.appendChild(element2);
    }

    //- Create option elements for Employers
    for(k = 0; k  < employersArray.length; k++) {
      let element3 = document.createElement('option');
      element3.value= employersArray[k]["EmployerID"];
      element3.text = employersArray[k]["EmployerID"] + " - " + employersArray[k]["EmployerName"];
      employerInput.appendChild(element3);
    }

    //- Create option elements for Agents
    for(l = 0; l < agentsArray.length; l++) {
      let element4 = document.createElement('option');
      element4.value = agentsArray[l]["AgentID"];
      element4.text = agentsArray[l]["AgentName"];
      agentInput.appendChild(element4);
    }
  script(src="/js/validation.js")
